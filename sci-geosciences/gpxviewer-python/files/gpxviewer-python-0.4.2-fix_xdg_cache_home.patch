From edb9e6dbf662c900bd675d3cc53682c8c08c5157 Mon Sep 17 00:00:00 2001
From: James Rowe <jnrowe@gmail.com>
Date: Mon, 6 Jun 2011 14:20:42 +0100
Subject: [PATCH] Use glib.get_user_cache_dir() for correct handling of
 $XDG_CACHE_HOME.

---
 gpxviewer/ui.py |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/gpxviewer/ui.py b/gpxviewer/ui.py
index b7267ed..da47c75 100644
--- a/gpxviewer/ui.py
+++ b/gpxviewer/ui.py
@@ -21,6 +21,7 @@
 #
 import os
 import sys
+import glib
 import gtk
 import gobject
 
@@ -152,7 +153,9 @@ class MainWindow:
 		self.ui_dir = ui_dir
 
 		self.map = osmgpsmap.GpsMap(
-					tile_cache=os.path.expanduser('~/.cache/gpxviewer/tiles/'))
+					tile_cache=os.path.join(
+						glib.get_user_cache_dir(),
+						'gpxviewer', 'tiles'))
 		self.map.layer_add(
 					osmgpsmap.GpsMapOsd(
 						show_dpad=False,
-- 
1.7.5.4

